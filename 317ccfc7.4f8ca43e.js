(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{104:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return m}));var a=t(0),r=t.n(a);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=r.a.createContext({}),b=function(e){var n=r.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=b(e.components);return r.a.createElement(l.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},u=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),p=b(t),u=a,m=p["".concat(o,".").concat(u)]||p[u]||d[u]||i;return t?r.a.createElement(m,c(c({ref:n},l),{},{components:t})):r.a.createElement(m,c({ref:n},l))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=u;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var l=2;l<i;l++)o[l]=t[l];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},158:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/boards-rsconnect-datasets-a41c25e0f25eb93d34aaf575bc462507.png"},159:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/boards-rsconnect-sharing-7449c20198d0f3e688acfc192fb74e85.png"},69:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return s})),t.d(n,"default",(function(){return b}));var a=t(2),r=t(6),i=(t(0),t(104)),o={id:"rsconnect",title:"Using RStudio Connect Boards",sidebar_label:"RStudio Connect"},c={unversionedId:"boards/rsconnect",id:"boards/rsconnect",isDocsHomePage:!1,title:"Using RStudio Connect Boards",description:"Registering",source:"@site/docs/boards/rsconnect.md",slug:"/boards/rsconnect",permalink:"/pins/docs/boards/rsconnect",editUrl:"https://github.com/mlverse/pins/edit/master/website/docs/boards/rsconnect.md",version:"current",sidebar_label:"RStudio Connect",sidebar:"docs",previous:{title:"Using Kaggle Boards",permalink:"/pins/docs/boards/kaggle"},next:{title:"Using S3 Boards",permalink:"/pins/docs/boards/s3"}},s=[{value:"Registering",id:"registering",children:[]},{value:"Pinning",id:"pinning",children:[]},{value:"Discovering",id:"discovering",children:[]},{value:"Sharing",id:"sharing",children:[{value:"Public",id:"public",children:[]}]},{value:"Automation",id:"automation",children:[]},{value:"Customizing",id:"customizing",children:[]}],l={rightToc:s};function b(e){var n=e.components,o=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},l,o,{components:n,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"registering"},"Registering"),Object(i.b)("p",null,"In order to use RStudio Connect as a ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/"}),"board"),", you need to authenticate first. When using RStudio, you can authenticate launching ",Object(i.b)("strong",{parentName:"p"},"Tools")," - ",Object(i.b)("strong",{parentName:"p"},"Global Options")," - ",Object(i.b)("strong",{parentName:"p"},"Publishing")," - ",Object(i.b)("strong",{parentName:"p"},"Connect"),", and follow the instructions from that wizard:"),Object(i.b)("p",null,"Once an RStudio Connect account is registered in RStudio, you can simply run:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),"board_register_rsconnect()\n")),Object(i.b)("p",null,"Notice that ",Object(i.b)("inlineCode",{parentName:"p"},"board_register_rsconnect()")," is just an alias with named parameters to ",Object(i.b)("inlineCode",{parentName:"p"},"board_register()"),"; the previous code is equivalent to:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),'board_register("rsconnect")\n')),Object(i.b)("p",null,"If you happen to have multiple RStudio Connect servers registered, you will have to specify the ",Object(i.b)("inlineCode",{parentName:"p"},"server")," parameter. Similarly, when multiple accounts are registered, you will need to specify the ",Object(i.b)("inlineCode",{parentName:"p"},"account")," parameter."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),'# register when multiple servers are available\nboard_register_rsconnect(server = "https://rstudio-connect-server")\n\n# register when multiple accounts are available\nboard_register_rsconnect(account = "account-name")\n')),Object(i.b)("p",null,"Once the RStudio Connect board is registered, you can pin and search using ",Object(i.b)("inlineCode",{parentName:"p"},"pin()"),", ",Object(i.b)("inlineCode",{parentName:"p"},"pin_get()")," and ",Object(i.b)("inlineCode",{parentName:"p"},"pin_find()")," as usual."),Object(i.b)("h2",{id:"pinning"},"Pinning"),Object(i.b)("p",null,"Like in other boards, you can create pins for ",Object(i.b)("inlineCode",{parentName:"p"},"iris")," and ",Object(i.b)("inlineCode",{parentName:"p"},"mtcars")," by setting ",Object(i.b)("inlineCode",{parentName:"p"},"board")," to the RStudio Connect board,"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),'pin(iris, description = "The iris data set", board = "rsconnect")\npin(mtcars, description = "The motor trend cars data set", board = "rsconnect")\n')),Object(i.b)("p",null,"After a pin is created, the pin also becomes available in RStudio Connect,"),Object(i.b)("p",null,Object(i.b)("img",{src:t(158).default})),Object(i.b)("p",null,"You can also retrieve pins back from RStudio Connect using the now familiar ",Object(i.b)("inlineCode",{parentName:"p"},"pin_get()")," function."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),'pin_get("iris", board = "rsconnect")\n')),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"# A tibble: 150 x 5\n   Sepal.Length Sepal.Width Petal.Length Petal.Width Species\n          <dbl>       <dbl>        <dbl>       <dbl> <fct>\n 1          5.1         3.5          1.4         0.2 setosa\n 2          4.9         3            1.4         0.2 setosa\n 3          4.7         3.2          1.3         0.2 setosa\n 4          4.6         3.1          1.5         0.2 setosa\n 5          5           3.6          1.4         0.2 setosa\n 6          5.4         3.9          1.7         0.4 setosa\n 7          4.6         3.4          1.4         0.3 setosa\n 8          5           3.4          1.5         0.2 setosa\n 9          4.4         2.9          1.4         0.2 setosa\n10          4.9         3.1          1.5         0.1 setosa\n# \u2026 with 140 more rows\n")),Object(i.b)("h2",{id:"discovering"},"Discovering"),Object(i.b)("p",null,"You can then search pins in your RStudio Connect server using ",Object(i.b)("inlineCode",{parentName:"p"},"pin_find()"),", which by default search all boards but you can also explicitly request to use this particular RStudio Connect board:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),'pin_find("mt", board = "rsconnect")\n')),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),'# A tibble: 1 x 4\n  name             description                       type  board\n  <chr>            <chr>                             <chr> <chr>\n1 jluraschi/mtcars "The motor trend cars data set. " table rsconnect\n')),Object(i.b)("p",null,"RStudio Connect boards contain extended fields that go beyond the fields ",Object(i.b)("inlineCode",{parentName:"p"},"pins")," requires, to retrieve all the additional fields use ",Object(i.b)("inlineCode",{parentName:"p"},"extended = TRUE"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),'pin_find(board = "rsconnect", extended = TRUE)\n')),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"# A tibble: 2 x 38\n     id guid  access_type connection_time\u2026 read_timeout init_timeout idle_timeout max_processes\n  <int> <chr> <chr>       <lgl>            <lgl>        <lgl>        <lgl>        <lgl>\n1  6446 1b9f\u2026 all         NA               NA           NA           NA           NA\n2  6612 bf5d\u2026 acl         NA               NA           NA           NA           NA\n# \u2026 with 30 more variables: min_processes <lgl>, max_conns_per_process <lgl>, load_factor <lgl>,\n#   url <chr>, vanity_url <lgl>, name <chr>, title <lgl>, bundle_id <int>, app_mode <int>,\n#   content_category <chr>, has_parameters <lgl>, created_time <chr>, last_deployed_time <chr>,\n#   r_version <lgl>, py_version <lgl>, build_status <int>, run_as <lgl>,\n#   run_as_current_user <lgl>, description <chr>, app_role <chr>, owner_first_name <chr>,\n#   owner_last_name <chr>, owner_username <chr>, owner_guid <chr>, owner_email <lgl>,\n#   owner_locked <lgl>, is_scheduled <lgl>, git <lgl>, board <chr>, type <chr>\n")),Object(i.b)("p",null,"Or ",Object(i.b)("inlineCode",{parentName:"p"},"pin_info()")," to retrieve all the information associated with a particular pin,"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),'pin_info("mtcars", board = "rsconnect")\n')),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{}),"# Source: rsconnect<jluraschi/mtcars> [table]\n# Extended:\n#   - id: 5639\n#   - guid: 9b6ae382-ebec-45de-8546-ee779e33ed10\n#   - access_type: acl\n#   - url: https://beta.rstudioconnect.com/content/5639/\n#   - vanity_url: FALSE\n#   - bundle_id: 13400\n#   - app_mode: 4\n#   - content_category: pin\n#   - has_parameters: FALSE\n#   - created_time: 2019-08-21T02:22:56.546011Z\n#   - last_deployed_time: 2019-08-23T15:55:25.435595Z\n#   - build_status: 2\n#   - run_as_current_user: FALSE\n#   - owner_first_name: Javier\n#   - owner_last_name: Luraschi\n#   - owner_username: jluraschi\n#   - owner_guid: ac498f34-174c-408f-8089-a9f10c630a37\n#   - owner_locked: FALSE\n#   - is_scheduled: FALSE\n#   - rows: 14\n#   - cols: 11\n")),Object(i.b)("p",null,"Notice that the given 'mt' search keyword is searched as a prefix in the pin name."),Object(i.b)("h2",{id:"sharing"},"Sharing"),Object(i.b)("p",null,"You can share pins with others in RStudio Connect, by changing the viewers of the document to specific groups or all users with access; or alternatively, to specific users. This is accomplished by opening the new published pin and then changing access under the settings tab."),Object(i.b)("p",null,Object(i.b)("img",{src:t(159).default})),Object(i.b)("p",null,"Once you share this pin with specific users, they can follow the same steps to register their RStudio Connect board, to download this pin."),Object(i.b)("h3",{id:"public"},"Public"),Object(i.b)("p",null,"You can also choose to share a pin publicly and avoid having to register the RStudio Connect board to retrieve this pin."),Object(i.b)("p",null,'To create a public pin, first publish a pin and navigate to RStudio Connect; then set the "Access" to "Anyone - no login required" -- The pin will become public and accessible to anyone using their content URL. The remote resource stored in RStudio Connect can then be cached locally with ',Object(i.b)("inlineCode",{parentName:"p"},"pin()")," as follows:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),'pin("https://rstudio-connect-server/content/1234", name = "my-rsc-content")\n')),Object(i.b)("p",null,'To avoid having to manually change the "Access" manually, you can also set the ',Object(i.b)("inlineCode",{parentName:"p"},"access_type")," to ",Object(i.b)("inlineCode",{parentName:"p"},"acl"),", ",Object(i.b)("inlineCode",{parentName:"p"},"loggend_in")," or ",Object(i.b)("inlineCode",{parentName:"p"},"all")," when creating a pin:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),'# create a publicly visible pin\npin("https://rstudio-connect-server/content/1234", name = "my-rsc-content", access_type = "all")\n')),Object(i.b)("h2",{id:"automation"},"Automation"),Object(i.b)("p",null,"One significant advantage from using RStudio Connect over other boards is its ability to schedule R Markdown reports to run automatically. This allows you to automate the creation of pins and also consume pins published manually from automated reports."),Object(i.b)("p",null,"To support automation you need to use an ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rstudio.com/connect/user/api-keys/"}),"RStudio Connect API Key")," as your authentication method. Therefore, the first step is to create an API Key, once created, you will need to register the board as follows:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-r"}),'board_register_rsconnect(key = "the-rstudio-connect-api-key",\n                         server = "https://rstudio-connect-server")\n')),Object(i.b)("p",null,"However, since it's a best practice to not store secrets in plain text, ",Object(i.b)("inlineCode",{parentName:"p"},"pins")," will also read the key from the ",Object(i.b)("inlineCode",{parentName:"p"},"CONNECT_API_KEY")," environment variable, or you can retrieve explicitly as ",Object(i.b)("inlineCode",{parentName:"p"},'Sys.getenv("CONNECT_API_KEY")')," before assigning it to the key parameter."),Object(i.b)("p",null,"Once authenticated, you can use ",Object(i.b)("inlineCode",{parentName:"p"},"pins")," as you would normally would. Let's take a look at an automated R Markdown report which retrieves the latest news from the BBC which we can then schedule to run daily to update the pin:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-markdown"}),'---\ntitle: "RStudio Connect -- World News"\n---\n\n`r \'\'````{r, setup, include = FALSE}\nlibrary(pins)\nboard_register_rsconnect(key = Sys.getenv("CONNECT_API_KEY"),\n                         server = Sys.getenv("CONNECT_SERVER"))\n```\n\nCreate the `world_news` data frame,\n\n`r \'\'````{r  fig.align=\'center\', warning=FALSE}\nlibrary(xml2)\n\nworld_news <- data.frame(title = xml_text(xml_find_all(\n  read_xml("http://feeds.bbci.co.uk/news/rss.xml"), "///item/title/node()")))\n```\n\nWhich you can then share as a pin,\n\n`r \'\'````{r}\npin(world_news, "worldnews", board = "rsconnect")\n```\n')),Object(i.b)("h2",{id:"customizing"},"Customizing"),Object(i.b)("p",null,"A pin is displayed in RStudio Connect with an auto-generated page showcasing instructions for getting the pin and a preview of the dataset, this page can be customized as follows:"),Object(i.b)("p",null,"1) Locate the file with ",Object(i.b)("inlineCode",{parentName:"p"},'system.file("views/data/index.html", package = "pins")'),"\n1) Copy the file to a new location and make any changes to it.\n1) Set the file path as an option using ",Object(i.b)("inlineCode",{parentName:"p"},"Sys.setenv(RSCONNECT_HTML_PATH = <your index>)"),".\n1) Pin a dataset normally,"),Object(i.b)("p",null,"Please note that experimental support for ",Object(i.b)("inlineCode",{parentName:"p"},"pins")," was introduced in RStudio Connect 1.7.8."))}b.isMDXComponent=!0}}]);