<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<title data-react-helmet="true">Reuse Tidy Datasets | pins</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Reuse Tidy Datasets | pins"><meta data-react-helmet="true" name="description" content="This notebook showcases the pins package ability to help you share and reuse tidy datasets with others. We will make use of the &quot;A Million News Headlines&quot; dataset from kaggle.com/therohk/million-headlines."><meta data-react-helmet="true" property="og:description" content="This notebook showcases the pins package ability to help you share and reuse tidy datasets with others. We will make use of the &quot;A Million News Headlines&quot; dataset from kaggle.com/therohk/million-headlines."><meta data-react-helmet="true" property="og:url" content="https://mlverse.github.io/docs/use-cases/reuse-tidy-datasets"><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://mlverse.github.io/docs/use-cases/reuse-tidy-datasets"><link rel="stylesheet" href="/styles.84e32f5c.css">
<link rel="stylesheet" href="/main.fd8a800d.css">
<link rel="preload" href="/styles.b2d0ee5e.js" as="script">
<link rel="preload" href="/runtime~main.9950f7b6.js" as="script">
<link rel="preload" href="/main.c265c379.js" as="script">
<link rel="preload" href="/1.d99f324c.js" as="script">
<link rel="preload" href="/2.0e375793.js" as="script">
<link rel="preload" href="/45.bcff2e3f.js" as="script">
<link rel="preload" href="/47.645a7fd0.js" as="script">
<link rel="preload" href="/935f2afb.90ef2f14.js" as="script">
<link rel="preload" href="/17896441.1491d4d2.js" as="script">
<link rel="preload" href="/deaf96ab.5ab002b0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/images/logo.png" alt="Pins Logo"><strong class="navbar__title">pins</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mlverse/pins" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-link"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/images/logo.png" alt="Pins Logo"><strong class="navbar__title">pins</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/mlverse/pins" target="_blank" rel="noopener noreferrer" class="menu__link github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/overview/using-in-rstudio">Using Pins in RStudio</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Boards</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/boards/understanding-boards">Understanding Boards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/boards/azure">Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/boards/digital-ocean">Digital Ocean</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/boards/github">GitHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/boards/google-cloud">Google Cloud</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/boards/kaggle">Kaggle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/boards/rsconnect">RStudio Connect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/boards/s3">S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/boards/website">Website</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/versioning">Versioning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced/too-big-to-pin">Too Big To Pin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Extensions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extensions/extending-pins">Extending Pins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/extensions/extending-boards">Extending Boards</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/use-cases/introduction">Introduction</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/use-cases/reuse-tidy-datasets">Reuse Tidy Datasets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/use-cases/automate-dataset-updates">Automate Dataset Updates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/use-cases/create-data-pipelines">Create Data Pipelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/use-cases/update-plumber-and-shiny-apps">Update Plumber and Shiny Apps</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference">Reference</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Reuse Tidy Datasets</h1></header><div class="markdown"><p>This notebook showcases the <code>pins</code> package ability to help you share and reuse tidy datasets with others. We will make use of the &quot;A Million News Headlines&quot; dataset from <a href="https://www.kaggle.com/therohk/million-headlines" target="_blank" rel="noopener noreferrer">kaggle.com/therohk/million-headlines</a>.</p><p>As a start, lets retrieve the dataset using <code>pins</code> and load it using <code>readr</code>. You will need to authenticate to Kaggle by downloading your token file from <a href="https://www.kaggle.com/me/account" target="_blank" rel="noopener noreferrer">kaggle.com/me/account</a>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-r codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">library(pins)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">board_register_kaggle(token = &quot;path/to/kaggle.json&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">news &lt;- pin_get(&quot;therohk/million-headlines&quot;, board = &quot;kaggle&quot;) %&gt;%</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  readr::read_csv()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">news</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># A tibble: 1,103,663 x 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   publish_date headline_text</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &lt;dbl&gt; &lt;chr&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 1     20030219 aba decides against community broadcasting licence</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 2     20030219 act fire witnesses must be aware of defamation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 3     20030219 a g calls for infrastructure protection summit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 4     20030219 air nz staff in aust strike for pay rise</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 5     20030219 air nz strike to affect australian travellers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 6     20030219 ambitious olsson wins triple jump</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 7     20030219 antic delighted with record breaking barca</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 8     20030219 aussie qualifier stosur wastes four memphis match</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 9     20030219 aust addresses un security council over iraq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">10     20030219 australia is locked into war timetable opp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># â€¦ with 1,103,653 more rows</span></div></div></div></div></div><p>First, let&#x27;s clean up this dataset. For instance, the &#x27;publish_date&#x27; column is a character, not a date:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-r codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">library(dplyr)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">news_cleaned &lt;- news %&gt;%</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  mutate(publish_date = as.Date(as.character(publish_date), format = &quot;%Y%m%d&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">news_cleaned</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># A tibble: 1,103,663 x 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   publish_date headline_text</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;date&gt;       &lt;chr&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 1 2003-02-19   aba decides against community broadcasting licence</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 2 2003-02-19   act fire witnesses must be aware of defamation</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 3 2003-02-19   a g calls for infrastructure protection summit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 4 2003-02-19   air nz staff in aust strike for pay rise</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 5 2003-02-19   air nz strike to affect australian travellers</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 6 2003-02-19   ambitious olsson wins triple jump</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 7 2003-02-19   antic delighted with record breaking barca</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 8 2003-02-19   aussie qualifier stosur wastes four memphis match</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 9 2003-02-19   aust addresses un security council over iraq</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">10 2003-02-19   australia is locked into war timetable opp</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># â€¦ with 1,103,653 more rows</span></div></div></div></div></div><p>Let&#x27;s also assume we are interested in understanding when news outlets publish news, not what headlines are published. For this, we can keep the counts per day and month and throw away the other columns:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-r codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">news_totals &lt;- news_cleaned %&gt;%</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  group_by(publish_date) %&gt;%</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  summarize(count = n())</span></div></div></div></div></div><p>We can now plot by month the total amount of news being produced by this news outlet:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-r codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">library(ggplot2)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">news_totals %&gt;%</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  group_by(publish_date = lubridate::floor_date(publish_date, &quot;year&quot;)) %&gt;%</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  summarize(count = sum(count)) %&gt;%</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ggplot(aes(x=publish_date, y=count)) +</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  geom_line()</span></div></div></div></div></div><p><img src="/assets/images/reuse-analysis-ggplot2-083ebdc60851567ce381cd6af80ab2da.png"></p><p>Now, while this might complete our particular analysis, others in your team might be interested in easily fetching your tidy dataset, which you can now easily share with <code>pins</code> in any available board. The following example uses RStudio Connect but this board can also be replaced to use Kaggle, GitHub or even custom boards:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-r codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pins::pin(news_totals, board = &quot;rsconnect&quot;)</span></div></div></div></div></div><p><a href="https://beta.rstudioconnect.com/connect/#/apps/6522/access" target="_blank" rel="noopener noreferrer"><img src="/assets/images/reuse-analysis-rsconnect-e41aa98d7ecd143ea355390d0cd14b29.png"></a></p><p>You can then use the board&#x27;s user interface to share this pin with others. A colleague can now reuse your tidy dataset by fetching it from the given board using pins:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-r codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pin_get(&quot;news-totals&quot;, board = &quot;rsconnect&quot;)</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># A tibble: 5,422 x 2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   publish_date count</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   &lt;date&gt;       &lt;int&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 1 2003-02-19     198</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 2 2003-02-20     250</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 3 2003-02-21     250</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 4 2003-02-22     126</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 5 2003-02-23     136</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 6 2003-02-24     250</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 7 2003-02-25     250</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 8 2003-02-26     250</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> 9 2003-02-27     222</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">10 2003-02-28     249</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># â€¦ with 5,412 more rows</span></div></div></div></div></div><p>You can preview the RStudio Connect pin for this tidy dataset at <a href="https://beta.rstudioconnect.com/connect/#/apps/6522/access" target="_blank" rel="noopener noreferrer">beta.rstudioconnect.com/connect/#/apps/6522/access</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/mlverse/pins/edit/master/website/docs/use-cases/reuse-tidy-datasets.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/use-cases/introduction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/use-cases/automate-dataset-updates"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Automate Dataset Updates Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div>Â© 2020. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.b2d0ee5e.js"></script>
<script src="/runtime~main.9950f7b6.js"></script>
<script src="/main.c265c379.js"></script>
<script src="/1.d99f324c.js"></script>
<script src="/2.0e375793.js"></script>
<script src="/45.bcff2e3f.js"></script>
<script src="/47.645a7fd0.js"></script>
<script src="/935f2afb.90ef2f14.js"></script>
<script src="/17896441.1491d4d2.js"></script>
<script src="/deaf96ab.5ab002b0.js"></script>
</body>
</html>