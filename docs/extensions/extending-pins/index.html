<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<title data-react-helmet="true">Extending Pins | pins</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Extending Pins | pins"><meta data-react-helmet="true" name="description" content="When you use pin(), the object being pinned (say, the data frame, list, matrix, etc) is serialized as an RDS file, a format native to R. This allows you to easily reload pins with pin_get() and have certainty that the object is exactly the same; however, this might not be ideal when sharing with others that might not use R as their primary environment or even if they are, it is convenient to preview what the pin contains when to easily discover resources."><meta data-react-helmet="true" property="og:description" content="When you use pin(), the object being pinned (say, the data frame, list, matrix, etc) is serialized as an RDS file, a format native to R. This allows you to easily reload pins with pin_get() and have certainty that the object is exactly the same; however, this might not be ideal when sharing with others that might not use R as their primary environment or even if they are, it is convenient to preview what the pin contains when to easily discover resources."><meta data-react-helmet="true" property="og:url" content="https://mlverse.github.io/pins/docs/extensions/extending-pins"><link data-react-helmet="true" rel="shortcut icon" href="/pins/images/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://mlverse.github.io/pins/docs/extensions/extending-pins"><link rel="stylesheet" href="/pins/styles.84e32f5c.css">
<link rel="stylesheet" href="/pins/main.fd8a800d.css">
<link rel="preload" href="/pins/styles.4469c2d1.js" as="script">
<link rel="preload" href="/pins/runtime~main.95a2e3fb.js" as="script">
<link rel="preload" href="/pins/main.951950ef.js" as="script">
<link rel="preload" href="/pins/1.d99f324c.js" as="script">
<link rel="preload" href="/pins/2.0e375793.js" as="script">
<link rel="preload" href="/pins/45.09fb534c.js" as="script">
<link rel="preload" href="/pins/47.645a7fd0.js" as="script">
<link rel="preload" href="/pins/935f2afb.6855e53b.js" as="script">
<link rel="preload" href="/pins/17896441.1491d4d2.js" as="script">
<link rel="preload" href="/pins/24f88a71.56077059.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/pins/"><img class="navbar__logo" src="/pins/images/logo.png" alt="Pins Logo"><strong class="navbar__title">pins</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pins/docs">Docs</a><a class="navbar__item navbar__link" href="/pins/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/mlverse/pins" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-link"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/pins/"><img class="navbar__logo" src="/pins/images/logo.png" alt="Pins Logo"><strong class="navbar__title">pins</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/pins/docs">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/pins/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/mlverse/pins" target="_blank" rel="noopener noreferrer" class="menu__link github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Overview</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/overview/using-in-rstudio">Using Pins in RStudio</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Boards</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/boards/understanding-boards">Understanding Boards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/boards/azure">Azure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/boards/digital-ocean">Digital Ocean</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/boards/github">GitHub</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/boards/google-cloud">Google Cloud</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/boards/kaggle">Kaggle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/boards/rsconnect">RStudio Connect</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/boards/s3">S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/boards/website">Website</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Advanced</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/advanced/versioning">Versioning</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/advanced/too-big-to-pin">Too Big To Pin</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Extensions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/pins/docs/extensions/extending-pins">Extending Pins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/pins/docs/extensions/extending-boards">Extending Boards</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Use Cases</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/use-cases/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/use-cases/reuse-tidy-datasets">Reuse Tidy Datasets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/use-cases/automate-dataset-updates">Automate Dataset Updates</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/use-cases/create-data-pipelines">Create Data Pipelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/pins/docs/use-cases/update-plumber-and-shiny-apps">Update Plumber and Shiny Apps</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/pins/docs/reference">Reference</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Extending Pins</h1></header><div class="markdown"><p>When you use <code>pin()</code>, the object being pinned (say, the data frame, list, matrix, etc) is serialized as an <a href="https://www.rdocumentation.org/packages/base/versions/3.6.1/topics/readRDS" target="_blank" rel="noopener noreferrer">RDS file</a>, a format native to R. This allows you to easily reload pins with <code>pin_get()</code> and have certainty that the object is exactly the same; however, this might not be ideal when sharing with others that might not use R as their primary environment or even if they are, it is convenient to preview what the pin contains when to easily discover resources.</p><p>Therefore, <code>pins</code> allows you to customize how a pin is stored by implementing a <code>pin()</code> S3 method for your particular object. As the <a href="/pins/">Understanding Boards</a> boards article mentions, a board is a storage location and is the job of <code>pin()</code> to persist the object. For your particular <code>pin()</code> implementation, you should call <code>board_pin_store()</code> as the last step to push the files associated to your pin into the board the user is requesting to use.</p><p>Similarly, you will need to implement <code>pin_load()</code> for that particular object &#x27;type&#x27; to reload the object. When implementing <code>pin_load()</code>, it is encouraged to also fallback when the serialized R object is not present, this allows others to create pins in other environments and programming languages.</p><p>To make this clear, consider the following example where we use a pin to share a fitted models with colleagues:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-r codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">library(pins)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">model &lt;- lm(iris)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pin(model, name = &quot;iris-lm&quot;)</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Call:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lm(formula = iris)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Coefficients:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (Intercept)        Sepal.Width       Petal.Length        Petal.Width  Speciesversicolor   Speciesvirginica</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           2.1713             0.4959             0.8292            -0.3152            -0.7236            -1.0235</span></div></div></div></div></div><p>Although this works without the need to define a custom pin, we can do a bit better by considering what others might be interested in accessing from outside R or while discovering resources. The following example extends objects of type <code>lm</code>, to save additional metadata.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="example"></a>Example<a aria-hidden="true" tabindex="-1" class="hash-link" href="#example" title="Direct link to heading">#</a></h2><p>The following example creates a custom pin for a linear model produced with <code>lm</code>, it enhances the default pin by adding a summary in plain text, a residuals plot and the original formula as metadata which other systems can read without using R.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-r codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pin.lm &lt;- function(x, name = NULL, description = NULL, board = NULL, ...) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  path &lt;- tempfile()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  dir.create(path)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  on.exit(unlink(path))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # save model</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  saveRDS(x, file.path(path, &quot;model.rds&quot;), version = 2)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # save summary</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  writeLines(capture.output(summary(lm(iris))), file.path(path, &quot;summary.txt&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  # save residuals vs fitted plot</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  grDevices::png(file.path(path, &quot;residuals.png&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  plot(x)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  dev.off()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  metadata &lt;- list(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    columns = list(formula = deparse(formula(x)))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  )</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  board_pin_store(board, path, name, description, &quot;linear_model&quot;, metadata, ...)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pin_load.linear_model &lt;- function(path, ...) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  readRDS(file.path(path, &quot;model.rds&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pin_preview.linear_model &lt;- function(x, ...) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  x</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p><strong>Note:</strong> The <code>metadata$columns</code> parameter is used to extract columns in RStudio&#x27;s Connection viewer, if one is not specified, RStudio will display <code>unknown</code>.</p><p>Once defined, you can pin this model in any board you&#x27;ve previously registered,</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-r codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">model &lt;- lm(iris)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># pin to local board</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pin(model, name = &quot;iris-lm&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># pin to github</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pin(model, name = &quot;iris-lm&quot;, board = &quot;github&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># pin to rstudio connect</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">pin(model, name = &quot;iris-lm&quot;, board = &quot;rsconnect&quot;)</span></div></div></div></div></div><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Call:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">lm(formula = iris)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Coefficients:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      (Intercept)        Sepal.Width       Petal.Length        Petal.Width  Speciesversicolor   Speciesvirginica</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           2.1713             0.4959             0.8292            -0.3152            -0.7236            -1.0235</span></div></div></div></div></div><p>Since additional metadata is being stored, other users can preview or access subsets of this models without having to reload it themselves. For instance, you can access those additional resources from <a href="/pins/">GitHub</a> or <a href="/pins/">RStudio Connect</a>:</p><p><img src="/pins/assets/images/pins-extending-metadata-afa268b798bbe7639cc1d3d8dd6611b3.png"></p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/mlverse/pins/edit/master/website/docs/extensions/extending-pins.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/pins/docs/advanced/too-big-to-pin"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Too Big To Pin</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/pins/docs/extensions/extending-boards"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Extending Boards Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#example" class="table-of-contents__link">Example</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div>Â© 2020. Built with Docusaurus.</div></div></div></footer></div>
<script src="/pins/styles.4469c2d1.js"></script>
<script src="/pins/runtime~main.95a2e3fb.js"></script>
<script src="/pins/main.951950ef.js"></script>
<script src="/pins/1.d99f324c.js"></script>
<script src="/pins/2.0e375793.js"></script>
<script src="/pins/45.09fb534c.js"></script>
<script src="/pins/47.645a7fd0.js"></script>
<script src="/pins/935f2afb.6855e53b.js"></script>
<script src="/pins/17896441.1491d4d2.js"></script>
<script src="/pins/24f88a71.56077059.js"></script>
</body>
</html>